# 该文件用于处理提示评分之后的结果，找出最好的几个提示模版。
import csv


def read_template_score(file_name, output_file):
    template_scores = []

    with open(file_name, 'r') as file:
        for line in file:
            line = line.strip()
            template = line.split(':')[1]
            template = template.replace(',accuracy', '')
            print(template)
            accuracy = float(line.split(':')[2].split(',')[0].strip())
            precision = float(line.split(':')[3].split(',')[0])
            recall = float(line.split(':')[4].split(',')[0])
            f1 = float(line.split(':')[5].split(',')[0])
            template_scores.append([template, accuracy, precision, recall, f1])

    with open(output_file, 'w', newline='') as csvfile:
        csvwriter = csv.writer(csvfile)
        csvwriter.writerow(['template', 'accuracy', 'precision', 'recall', 'f1'])
        csvwriter.writerows(template_scores)


if __name__ == '__main__':
    input_file_path = "multiply_template_score.txt"  # 替换为实际文件路径
    output_file_path = "multiply_template_score.csv"  # 替换为输出文件名
    read_template_score(input_file_path, output_file_path)
